# Шашлыки

Ruby on Rails приложение "Шашлыки".

Сайт, на котором пользователи могут огранизовывать предстоящие события, делиться впечатлениями и фотографиями.

Развернутое приложение - http://www.cnearing27-bbq.ru/

## Используемые техноголии

- GoogleOauth2
- GitHub Oauth
- MailJet
- YandexMap

## Предварительные требования

```
ruby 3.1.2
Rails 7.0.4
```

Установите bundler

    gem install bundler
    
Создайте OAuth App на GitHub, следуя [инструкии](https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app)

Получите учетные данные OAuth 2.0 от Google API Console по [инструкции](https://developers.google.com/identity/protocols/oauth2#basicsteps)

Зарегистрируйтесь на MailJet и добавьте свое приложение по [инструкции](https://dev.mailjet.com/email/guides/#authentication)

Получите ключ от API Яндекс карт, [инструкция](https://nethouse.ru/about/instructions/kak_poluchit_apikey_dlya_kart_yandex#:~:text=%D0%9A%D0%B0%D0%BA%20%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D1%82%D1%8C%20API%20Key%20%D0%B4%D0%BB%D1%8F%20%D0%AF%D0%BD%D0%B4%D0%B5%D0%BA%D1%81.%D0%9A%D0%B0%D1%80%D1%82%3F,-%D0%95%D1%81%D0%BB%D0%B8%20%D0%BD%D0%B0%20%D0%B2%D0%B0%D1%88%D0%B5%D0%BC)

## Локальная установка

Склонируйте репозиторий:

    git@github.com:cnearing27/bbq.git

Перейдите в корень проекта

    cd bbq

Установите необходимые гемы

    bundle install --without production
    
Для **локального** запуска, переименуйте файл `config/database.yml.example` => `config/database.yml`

В корне проекта создайте файл `.env` и заполните его по шаблону

```
MAILJET_API_KEY="Ваш ключ MailJet"
MAILJET_SECRET_KEY="Ваш секретный ключ MailJet"
MAILJET_SENDER="Email, от имени которого будет идти отправка почты"
YANDEX_MAP_API_KEY="Ваш ключ API Яндекс карт"
GITHUB_KEY="ID Вашего приложения на GitHub"
GITHUB_SECRET="SECRET Вашего приложения на GitHub"
GOOGLE_KEY="Ключ Вашего приложения Google OAuth2"
GOOGLE_SECRET="SECRET Вашего приложения Google OAuth2"
```
    
Создайте базу данных

    bundle exec rails db:migrate
    
Запустите сервер (будет доступен по адресу localhost:1080)

    bundle exec rails s
    
## Процесс использования

Зарегистрируйтесь на сайте, нажав кнопку "Зарегистрироваться" вверху страницы. Вы можете пройти процесс регистрации, заполнив поля представленной формы или используя кнопки "Войти через GitHub"/"Войти через GoogleOauth2". После прохождения процесса регистрации будет выполнен вход на сайт с учетной записью Вашего пользователя.

Вы можете установить пользовательский аватар, перейдя в раздел "Профиль", "Редактировать профиль"

На главной странице сайта Вы можете создать событие. Для этого укажите его название, место и время проведения. Также можете указать описание события и добавить пинкод, для того, чтобы ограничить возможность просмотра страницы события пользователями. Просматривать его смогут только те, кому Вы сообщите пинкод.

На странице события авторизованные пользователи смогут оставлять комментарии, обсуждая предстоящее/состоявшееся событие, а также добавлять фотографии с мероприятия.

Пользователи, имеющие доступ к странице Вашего события, смогут подписаться на это событие, нажав кнопку "Подписаться", после чего эти пользователи отобразятся в разделе "Пойдут:", а также они будут получать email-рассылку по данному событию. В email-рассылку входят уведомления о новых фотографиях/комментариях на странице события. Пользователь, добавивший фотографию/комментария, такого письма не получит. Также организатор события получает письма с уведомлением о новых подписчиках события.
